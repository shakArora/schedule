<!DOCTYPE html>
<html>
<head>
  <title id="pageTitle"></title>
    <link rel="shortcut icon" type="image/png" href="lpms.png"/>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <script src="thing.js"></script>
  <div class="container">
    <h1>LPMS Schedule</h1>
    <div class="time-box1">
      <h2>Today's Date: <strong><span id="currentDate"></span></strong></h2>
      <h2>Time: <strong><span id="currentTime"></span></strong></h2>
      <h2>Current Period: <span class="current-period-value" id="currentPeriodBox"></span></h2>
      <button class="button" onclick="window.location.href='announcements.html'">Announcements</button>
    </div>
    <div class="container">

      <hr>
      <h2>Today is a: <strong><span id="dayType"></span></strong><strong><span id="comment"></span></strong></h2>

      <h2>Time Until Period Ends:</h2>
      <div class="time-box">
        <div class="time-label">Hours</div>
        <div id="hoursLeftBox" class="time-value"></div>
      </div>
      <div class="time-box">
        <div class="time-label">Minutes</div>
        <div id="minutesLeftBox" class="time-value"></div>
      </div>
      <div class="time-box">
        <div class="time-label">Seconds</div>
        <div id="secondsLeftBox" class="time-value"></div>
      </div>
    </div>

    <div class="container">
      <h2>School Schedule:</h2>
      <table>
        <tr>
          <th>Period</th>
          <th>Start Time</th>
          <th>End Time</th>
        </tr>
        <tr>
          <td>No school</td>
          <td>No school</td>
          <td>No school</td>
        </tr>
        
      </table>
    </div>
  </div>

  <div id="info">
    <br>
    <hr>
    <p>This website was created by Shivum Arora (LPMS).</p>
    <p>If you find an error or have a suggestion, please email me at <a href="https://mail.google.com/mail/u/0/#inbox?compose=DmwnWrRnZMxWdrfbNJqVVnThhcbPtPNGtLgTVJnNKQwbFWXbSmswZFBXFnWHXzLqvmXTSmtMSBnb">195726@mcpsmd.net</a>.</p>
    <p>Copyright @shakArora, Idea by DefyGG (Daniel Mathew) (PHS).</p>
    <hr>
    <p>
          <br>
        Current version: <strong>1.0.1</strong> <br>
        Last updated: <strong>7/10/23</strong>
      <br><br><br>
    </p>

  </div>
  <script>
    fetch('days.json')
  .then(response => response.json())
  .then(data => {
    var currentDate = new Date().toISOString().split('T')[0];
    var dayData = data.find(day => day.date === currentDate);
    document.getElementById('dayType').innerHTML = dayData?.type || 'Unknown';

    document.getElementById('comment').innerHTML = dayData?.comment || '';
  })
  .catch(error => {
    console.log('Error fetching JSON data:', error);
  });

    function calculateTimeUntilPeriodEnds() {
      var periodEndTime = new Date();
      var currentPeriod = getCurrentPeriod();



      var currentTime = new Date();
      var timeDiff = periodEndTime - currentTime;
      
      var hours = Math.floor(timeDiff / (1000 * 60 * 60));
      var minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
      var seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
      var remainingTime = minutes.toString().padStart(2, '0') + ':' + seconds.toString().padStart(2, '0');

      document.getElementById("hoursLeftBox").innerHTML = hours;
      document.getElementById("minutesLeftBox").innerHTML = minutes;
      document.getElementById("secondsLeftBox").innerHTML = seconds;
      var urmom = remainingTime + ' - LPMS Schedule';
      document.getElementById("pageTitle").innerText = urmom;

    }
    function updateCurrentPeriodBox() {
      var currentPeriod = getCurrentPeriod();

      document.getElementById("currentPeriodBox").innerHTML = currentPeriod;
    }

    function getCurrentPeriod() {
  var currentDateTime = new Date();
  var currentHour = currentDateTime.getHours();
  var currentMinute = currentDateTime.getMinutes();

  if (currentHour >= 0) {
    return "No school";
  } 
    }
    

    setInterval(calculateTimeUntilPeriodEnds, 1000);

function updateCurrentTimeBox() {
  var currentTime = new Date();
  var hours = currentTime.getHours();
  var minutes = currentTime.getMinutes();
  var seconds = currentTime.getSeconds();
  var ampm = hours >= 12 ? 'PM' : 'AM';

  hours = hours % 12;
  hours = hours ? hours : 12;

  var month = currentTime.getMonth() + 1;
var day = currentTime.getDate();
var year = currentTime.getFullYear().toString().slice(-2);
var formattedDate = month + '/' + day + '/' + year;
document.getElementById("currentDate").innerHTML = formattedDate;
  document.getElementById("currentTime").innerHTML =
    hours + ":" + minutes.toString().padStart(2, '0') + ":" + seconds.toString().padStart(2, '0') + " " + ampm;
}


    setInterval(function () {
      updateCurrentPeriodBox();
      calculateTimeUntilPeriodEnds();
      updateCurrentTimeBox();
    }, 1000);
  </script>
</body>
</html>
