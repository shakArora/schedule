<!DOCTYPE html>
<html>
<head>
  <title>LPMS Schedule</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>LPMS Schedule</h1>
    <div class="time-box">
      <h2>Today's Date: <span id="currentDate"></span></h2>
      <h2>Time: <span id="currentTime"></span></h2>
      <h2>Current Period: <span class="current-period-value" id="currentPeriodBox"></span></h2>
      <button class="button" onclick="window.location.href='announcements.html'">Announcements</button>
    </div>
    <div class="container">

      <hr>
      <h2>Today is a: <strong><span id="dayType"></span></strong><strong><span id="comment"></span></strong></h2>

      <h2>Time Until Period Ends:</h2>
      <div class="time-box">
        <div class="time-label">Hours</div>
        <div id="hoursLeftBox" class="time-value"></div>
      </div>
      <div class="time-box">
        <div class="time-label">Minutes</div>
        <div id="minutesLeftBox" class="time-value"></div>
      </div>
      <div class="time-box">
        <div class="time-label">Seconds</div>
        <div id="secondsLeftBox" class="time-value"></div>
      </div>
    </div>

    <div class="container">
      <h2>Full Day School Schedule:</h2>
      <table>
        <tr>
          <th>Period</th>
          <th>Start Time</th>
          <th>End Time</th>
        </tr>
        <tr>
          <td>1</td>
          <td>8:15 AM</td>
          <td>9:01 AM</td>
        </tr>
        <tr>
          <td>2 (Talon TV)</td>
          <td>9:05 AM</td>
          <td>9:56 AM</td>
        </tr>
        <tr>
          <td>3</td>
          <td>10:00 AM</td>
          <td>10:46 AM</td>
        </tr>
        <tr>
          <td>4 (8th Grade Lunch)</td>
          <td>10:50 AM</td>
          <td>11:37 AM</td>
        </tr>
        <tr>
          <td>5 (6th Grade Lunch)</td>
          <td>11:41 AM</td>
          <td>12:29 PM</td>
        </tr>
        <tr>
          <td>6 (7th Grade Lunch)</td>
          <td>12:34 PM</td>
          <td>1:17 PM</td>
        </tr>
        <tr>
          <td>7</td>
          <td>1:21 PM</td>
          <td>2:09 PM</td>
        </tr>
        <tr>
          <td>8</td>
          <td>2:13 PM</td>
          <td>3:00 PM</td>
        </tr>
      </table>
    </div>
  </div>

  <div id="info">
    <br>
    <hr>
    <p>This website was created by Shivum Arora (LPMS).</p>
    <p>If you find an error or have a suggestion, please email me at <a href="https://mail.google.com/mail/u/0/#inbox?compose=DmwnWrRnZMxWdrfbNJqVVnThhcbPtPNGtLgTVJnNKQwbFWXbSmswZFBXFnWHXzLqvmXTSmtMSBnb">195726@mcpsmd.net</a>.</p>
    <p>Copyright @shakArora, Idea by DefyGG (Daniel Mathew) (PHS).</p>
    <hr>
    <p>
          <br>
        Current version: <strong>1.0.1</strong> <br>
        Last updated: <strong>6/16/23</strong>
    </p>
  </div>
  <script>
    fetch('days.json')
  .then(response => response.json())
  .then(data => {
    // Get today's date
    var currentDate = new Date().toISOString().split('T')[0];

    // Find the corresponding day type and comment for today's date
    var dayData = data.find(day => day.date === currentDate);

    // Display the day type
    document.getElementById('dayType').innerHTML = dayData?.type || 'Unknown';

    // Display the comment
    document.getElementById('comment').innerHTML = dayData?.comment || '';
  })
  .catch(error => {
    console.log('Error fetching JSON data:', error);
  });

    // Calculate time until period ends
    function calculateTimeUntilPeriodEnds() {
      var periodEndTime = new Date();
      var currentPeriod = getCurrentPeriod();

      switch (currentPeriod) {
        case "Period 1":
          periodEndTime.setHours(9, 1, 0);
          break;
        case "Transition":
          periodEndTime.setHours(9, 5, 0);
          break;
        case "Period 2 (Talon TV)":
          periodEndTime.setHours(9, 56, 0);
          break;
        case "Transition":
          periodEndTime.setHours(10, 0, 0);
          break;
        case "Period 3":
          periodEndTime.setHours(10, 46, 0);
          break;
        case "Transition":
          periodEndTime.setHours(10, 50, 0);
          break;
        case "Period 4 (8th Grade Lunch)":
          periodEndTime.setHours(11, 37, 0);
          break;
        case "Transition":
          periodEndTime.setHours(11, 41, 0);
          break;
        case "Period 5 (6th Grade Lunch)":
          periodEndTime.setHours(12, 28, 0);
          break;
        case "Transition":
          periodEndTime.setHours(12, 32, 0);
          break;
        case "Period 6 (7th Grade Lunch)":
          periodEndTime.setHours(13, 19, 0);
          break;
        case "Transition":
          periodEndTime.setHours(13, 23, 0);
          break;
        case "Period 7":
          periodEndTime.setHours(14, 9, 0);
          break;
        case "Transition":
          periodEndTime.setHours(14, 13, 0);
          break;
        case "Period 8":
          periodEndTime.setHours(15, 0, 0);
          break;
        case "After school":
          periodEndTime.setHours(23, 59, 0);
          break;
        
        default:
          break;
      }

      var currentTime = new Date();
      var timeDiff = periodEndTime - currentTime;

      // Calculate hours, minutes, and seconds
      var hours = Math.floor(timeDiff / (1000 * 60 * 60));
      var minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
      var seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);

      // Update the time boxes
      document.getElementById("hoursLeftBox").innerHTML = hours;
      document.getElementById("minutesLeftBox").innerHTML = minutes;
      document.getElementById("secondsLeftBox").innerHTML = seconds;
    }

    // Update the current period box
    function updateCurrentPeriodBox() {
      var currentPeriod = getCurrentPeriod();

      document.getElementById("currentPeriodBox").innerHTML = currentPeriod;
    }

    // Get the current period based on the current time
    function getCurrentPeriod() {
  var currentDateTime = new Date();
  var currentHour = currentDateTime.getHours();
  var currentMinute = currentDateTime.getMinutes();

  if (currentHour < 8 || (currentHour === 8 && currentMinute < 15)) {
    return "Before School";
  } else if ((currentHour === 8 && currentMinute >= 15) || (currentHour === 9 && currentMinute < 01)) {
    return "Period 1";
  } else if ((currentHour === 9 && currentMinute >= 05) && (currentHour === 9 && currentMinute < 56)) {
    return "Period 2 (Talon TV)";
  } else if ((currentHour === 10 && currentMinute >= 00) && (currentHour === 10 && currentMinute < 46)) {
    return "Period 3";
  } else if ((currentHour === 10 && currentMinute >= 50) || (currentHour === 11 && currentMinute < 37)) {
    return "Period 4 (8th grade lunch)";
  } else if ((currentHour === 11 && currentMinute >= 41) || (currentHour === 12 && currentMinute < 29)) {
    return "Period 5 (6th Grade Lunch)";
  } else if ((currentHour === 12 && currentMinute >= 34) || (currentHour === 13 && currentMinute < 17)) {
    return "Period 6 (7th Grade Lunch)";
  } else if ((currentHour === 13 && currentMinute >= 21) || (currentHour === 14 && currentMinute < 09)) {
    return "Period 7";
  } else if ((currentHour === 14 && currentMinute >= 13) && (currentHour === 15 && currentMinute < 0)) {
    return "Period 8";
  } else if (currentHour === 15 && currentMinute >= 0) {
    return "After School";
  } else if ((currentHour <= 23 && currentMinute <= 59 && currentHour > 15)) {
    return "After School";
  } else {
    return "Transition";
  }
}
    
    

    // Update the current time box
    function updateCurrentTimeBox() {
      var currentTime = new Date();
      var hours = currentTime.getHours();
      var minutes = currentTime.getMinutes();
      var seconds = currentTime.getSeconds();

      document.getElementById("currentDate").innerHTML =
        currentTime.toDateString();
      document.getElementById("currentTime").innerHTML =
        hours + ":" + minutes + ":" + seconds;
    }

    // Update the time boxes every second
    setInterval(function () {
      updateCurrentPeriodBox();
      calculateTimeUntilPeriodEnds();
      updateCurrentTimeBox();
    }, 1000);
  </script>
</body>
</html>
